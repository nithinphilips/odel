{"name":"Odel","tagline":"Tool to upload documents to Tririga from command-line","body":"Odel\r\n====\r\nOdel uploads Data Integrator files to Tririga from the command-line.\r\n\r\nYou can import the files quickly and easily with Odel. It can also be called\r\nfrom script as part of a batch process.\r\n\r\nGet started by installing Odel::\r\n\r\n    python setup.py install\r\n\r\nOnce installed, odel can be invoked using the ``odel`` command::\r\n\r\n    odel --help\r\n\r\nWe will be working with a file called ``users.txt`` (the fields are TAB delimited)::\r\n\r\n    $ cat users.txt\r\n    triFirstNameTX  triLastNameTX   triUserNameTX\r\n    Homer   Simpson hsimpson\r\n    Bender  Rodriguez       brodriguez\r\n\r\nTo upload ``users.txt`` to Tririga running on ``localhost``, you can run::\r\n\r\n    odel --username=system --password=admin --module=triPeople \\\r\n         --businessobject=triPeople --form=triEmployee \\\r\n         http://localhost:9080/ users.txt\r\n\r\nYou can save some typing if you name you DI files to include the module,\r\nbusiness object and form names. For example, if you rename ``users.txt``\r\nto ``triPeople-triPeople-triEmployee.txt``, you can run::\r\n\r\n    odel --username=system --password=admin \\\r\n         http://localhost:9080/ triPeople-triPeople-triEmployee.txt\r\n\r\nOdel will parse the file name to get the necessary information.\r\n\r\nThe url portion may be shortend to just the server name::\r\n\r\n    odel --username=system --password=admin \\\r\n         localhost:9080 triPeople-triPeople-triEmployee.txt\r\n\r\nThe port can be removed as well. The username and password default to \r\n``system`` and ``admin``, so those can also be omitted (also now is a good\r\ntime to change that password lest you get pwned!)::\r\n\r\n    odel localhost triPeople-triPeople-triEmployee.txt\r\n\r\nWaiting for Processing\r\n----------------------\r\nNormally Odel will terminate as soon as the file is transmitted to Tririga.  It\r\nwill still take a few minutes for Tririga to process the file and create the\r\nrecords. Often, when running as part of a batch process you will want to wait\r\nuntil the file is processed before performing the next task. \r\n\r\nIf the ``-w`` flag is set, Odel will wait until Tririga changes the data upload\r\nstatus to *Rollup All Completed* or *Failed*, indicating the completion of the\r\nupload process.\r\n\r\nHow it Works\r\n------------\r\nTririga does not provide a public API to upload files through Data Integrator.\r\nTo make Odel work we simulate an interactive user session. Odel uses a\r\ncombination of BusinessConnect (SOAP API) and web scraping to do its job.\r\n\r\nThe first use for the SOAP API is to turn the module, business object and form\r\nnames into IDs. The Data Integrator feature expects IDs rather than string\r\nvalues. In the Tririga web interface, these fields are populated using\r\nJavascript. Odel does not execute any Javascript, so the SOAP API fills in the\r\ngap.\r\n\r\nOdel also retrieves the list possible *State Transitions* using the SOAP API.\r\nThese are state transitions that originate from a *null* record. If the user\r\ndid not specify a state transition using the ``--action`` argument the first\r\npossible state transition is selected.\r\n\r\nNext, Odel simulates a Tririga user login. It uses the *force* login option\r\n(same as clicking the \"remove active session\" link in the login page) to make\r\nsure the login always succeeds. This has the effect of ending any other active\r\nsessions for the Tririga user account. Once logged in the next step is to\r\nupload the file. Data Integrator works in two steps. Step one sends the file\r\ndata to tririga. Step two sends the commands necessary to start the file\r\nprocessing. Tririga takes care of matching up the file contents and the\r\nprocessing commands.\r\n\r\nIf the user did not specify the ``--wait`` option, Odel will then quit.\r\n\r\nIf the ``--wait`` option is on, Odel needs to find out if the records that were\r\njust uploaded have been processed. Tririga processes Data Integrator uploads\r\nasynchronously. In the web interface the user will get a notification when the\r\nprocessing is complete. Checking the user's notifications is one possible\r\nmethod to see if the upload completed. It is however more reliable to check the\r\nData Upload records themselves. So Odel invokes the ``runNamedQuery`` SOAP\r\noperation to run the ``Data Upload - System - Manager Query`` query. Odel\r\npasses in the file name as a dynamic filter to limit the number of records\r\nreturned.\r\n\r\nOdel checks all the returned records (there could be more than one if another\r\nfile with the same name was uploaded previously) to see if any of them are in\r\none of the processing statuses (``NEW``, ``DONE`` or ``UPLOADING...``.) If they\r\nare, Odel waits a few seconds and checks again. It repeats the process until\r\nthe status changes. When the status changes Odel will quit. If the file is not\r\nprocessed in about 10 minutes Odel will simply give up. This can happen with\r\nvery large files or more commonly if the ``Data Integrator`` agent is not\r\nrunning on the host where the file was uploaded.\r\n\r\nLicense\r\n-------\r\n\r\n    Odel. Tool to upload Data Integrator files to IBM Tririga.\r\n    Copyright (C) 2014 Nithin Philips\r\n\r\n    This program is free software: you can redistribute it and/or modify\r\n    it under the terms of the GNU General Public License as published by\r\n    the Free Software Foundation, either version 3 of the License, or\r\n    (at your option) any later version.\r\n\r\n    This program is distributed in the hope that it will be useful,\r\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n    GNU General Public License for more details.\r\n\r\n    You should have received a copy of the GNU General Public License\r\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}